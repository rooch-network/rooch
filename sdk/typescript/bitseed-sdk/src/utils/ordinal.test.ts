// Copyright (c) RoochNetwork
// SPDX-License-Identifier: Apache-2.0
import { describe, it, expect } from 'vitest'
import { decodeInscriptionMetadata } from "./ordinal.js";

describe('decodeInscription', () => {
  it('decode Inscription from move tick transaction hex should be ok', () => {
    const txHex = '020000000001011a5410ee091ec2146ef23d4c9e9540c09f16dc414c6e4b5bf460ea0b9fa8a1610000000000fdffffff015802000000000000225120114002a1d9df42cd866b715e4477f79c848229be5a3eb83fa57f5831e4af50950340875afdeb197daa94e015c3680ca403a3e5549f6c83a277cc2f02b1db19490696c09ccd22ed5f3d62d976f7a6671c4991dc4858ed2a1a6220cdd232f6a2b5bf46fd090120e1f462719cc15cccd0fac248b5d478aed358bfe4835bb02c43c38b9a5f635ad8ac0063036f7264554cd4a4626f70666465706c6f79647469636b646d6f766566616d6f756e741903e86a61747472696275746573a366726570656174016967656e657261746f72784f2f696e736372697074696f6e2f3666353534373563653635303534616138333731643631386432313764613863396137363463656364616634646562636263653864363331326665366234643869306b6465706c6f795f617267738178377b22686569676874223a7b2274797065223a2272616e6765222c2264617461223a7b226d696e223a312c226d6178223a313030307d7d7d5707626974736565646841c1e1f462719cc15cccd0fac248b5d478aed358bfe4835bb02c43c38b9a5f635ad8b890202e8c5bdceee485a7cca0f2c3f3e8b62866b26abe70036bd8bae6713c9d00000000';
    const meta = decodeInscriptionMetadata(txHex, 0);
    expect(meta).toBeDefined();
    expect(meta.op).toBe("deploy")
    expect(meta.tick).toBe('move')
    expect(meta.amount).toBe(1000)
  });

  
  it('decode big metadata Inscription from move tick transaction hex should be ok', () => {
    const txHex = '0200000000010155d7379f6b35d7e3e633cd6b07eecbfb0f8f6d705e280bb9fe6c293f519adf1c0000000000fdffffff015802000000000000225120114002a1d9df42cd866b715e4477f79c848229be5a3eb83fa57f5831e4af50950340b9adbf8a6d96ddc9f17a2f02f752009e65eaf220e07ac2b81b74578b4be0e69ec3db41c41dac08701321b66358b5faf3d0402f3459f024ee6ba51384ed0df482fd300c20e1f462719cc15cccd0fac248b5d478aed358bfe4835bb02c43c38b9a5f635ad8ac0063036f7264554d0802a4626f70666465706c6f79647469636b646d6f766566616d6f756e741903e86a61747472696275746573a366726570656174016967656e657261746f72784f2f696e736372697074696f6e2f3666353534373563653635303534616138333731643631386432313764613863396137363463656364616634646562636263653864363331326665366234643869306b6465706c6f795f61726773983278377b226c6576656c30223a7b2274797065223a2272616e6765222c2264617461223a7b226d696e223a312c226d6178223a313030307d7d7d78377b226c6576656c31223a7b2274797065223a2272616e6765222c2264617461223a7b226d696e223a312c226d6178223a313030307d7d7d78377b226c6576656c32223a7b2274797065223a2272616e6765222c2264617461223a7b226d696e223a312c226d6178223a313030307d7d7d78377b226c6576656c33223a7b2274797065223a2272616e6765222c2264617461223a7b226d696e223a312c226d6178223a313030307d7d7d78377b226c6576656c34223a7b2274797065223a2272616e6765222c2264617461223a7b226d696e223a312c226d6178223a313030307d7d7d78377b226c6576656c35223a7b2274797065223a2272616e6765222c2264617461223a7b226d696e223a312c226d6178223a313030307d7d7d78377b226c6576656c36223a7b2274797065223a2272554d0802616e6765222c2264617461223a7b226d696e223a312c226d6178223a313030307d7d7d78377b226c6576656c37223a7b2274797065223a2272616e6765222c2264617461223a7b226d696e223a312c226d6178223a313030307d7d7d78377b226c6576656c38223a7b2274797065223a2272616e6765222c2264617461223a7b226d696e223a312c226d6178223a313030307d7d7d78377b226c6576656c39223a7b2274797065223a2272616e6765222c2264617461223a7b226d696e223a312c226d6178223a313030307d7d7d78387b226c6576656c3130223a7b2274797065223a2272616e6765222c2264617461223a7b226d696e223a312c226d6178223a313030307d7d7d78387b226c6576656c3131223a7b2274797065223a2272616e6765222c2264617461223a7b226d696e223a312c226d6178223a313030307d7d7d78387b226c6576656c3132223a7b2274797065223a2272616e6765222c2264617461223a7b226d696e223a312c226d6178223a313030307d7d7d78387b226c6576656c3133223a7b2274797065223a2272616e6765222c2264617461223a7b226d696e223a312c226d6178223a313030307d7d7d78387b226c6576656c3134223a7b2274797065223a2272616e6765222c2264617461223a7b226d696e223a312c226d6178223a313030307d7d7d78387b226c6576656c3135223a7b2274797065223a227261554d08026e6765222c2264617461223a7b226d696e223a312c226d6178223a313030307d7d7d78387b226c6576656c3136223a7b2274797065223a2272616e6765222c2264617461223a7b226d696e223a312c226d6178223a313030307d7d7d78387b226c6576656c3137223a7b2274797065223a2272616e6765222c2264617461223a7b226d696e223a312c226d6178223a313030307d7d7d78387b226c6576656c3138223a7b2274797065223a2272616e6765222c2264617461223a7b226d696e223a312c226d6178223a313030307d7d7d78387b226c6576656c3139223a7b2274797065223a2272616e6765222c2264617461223a7b226d696e223a312c226d6178223a313030307d7d7d78387b226c6576656c3230223a7b2274797065223a2272616e6765222c2264617461223a7b226d696e223a312c226d6178223a313030307d7d7d78387b226c6576656c3231223a7b2274797065223a2272616e6765222c2264617461223a7b226d696e223a312c226d6178223a313030307d7d7d78387b226c6576656c3232223a7b2274797065223a2272616e6765222c2264617461223a7b226d696e223a312c226d6178223a313030307d7d7d78387b226c6576656c3233223a7b2274797065223a2272616e6765222c2264617461223a7b226d696e223a312c226d6178223a313030307d7d7d78387b226c6576656c3234223a7b2274797065223a22554d080272616e6765222c2264617461223a7b226d696e223a312c226d6178223a313030307d7d7d78387b226c6576656c3235223a7b2274797065223a2272616e6765222c2264617461223a7b226d696e223a312c226d6178223a313030307d7d7d78387b226c6576656c3236223a7b2274797065223a2272616e6765222c2264617461223a7b226d696e223a312c226d6178223a313030307d7d7d78387b226c6576656c3237223a7b2274797065223a2272616e6765222c2264617461223a7b226d696e223a312c226d6178223a313030307d7d7d78387b226c6576656c3238223a7b2274797065223a2272616e6765222c2264617461223a7b226d696e223a312c226d6178223a313030307d7d7d78387b226c6576656c3239223a7b2274797065223a2272616e6765222c2264617461223a7b226d696e223a312c226d6178223a313030307d7d7d78387b226c6576656c3330223a7b2274797065223a2272616e6765222c2264617461223a7b226d696e223a312c226d6178223a313030307d7d7d78387b226c6576656c3331223a7b2274797065223a2272616e6765222c2264617461223a7b226d696e223a312c226d6178223a313030307d7d7d78387b226c6576656c3332223a7b2274797065223a2272616e6765222c2264617461223a7b226d696e223a312c226d6178223a313030307d7d7d78387b226c6576656c3333223a7b227479706522554d08023a2272616e6765222c2264617461223a7b226d696e223a312c226d6178223a313030307d7d7d78387b226c6576656c3334223a7b2274797065223a2272616e6765222c2264617461223a7b226d696e223a312c226d6178223a313030307d7d7d78387b226c6576656c3335223a7b2274797065223a2272616e6765222c2264617461223a7b226d696e223a312c226d6178223a313030307d7d7d78387b226c6576656c3336223a7b2274797065223a2272616e6765222c2264617461223a7b226d696e223a312c226d6178223a313030307d7d7d78387b226c6576656c3337223a7b2274797065223a2272616e6765222c2264617461223a7b226d696e223a312c226d6178223a313030307d7d7d78387b226c6576656c3338223a7b2274797065223a2272616e6765222c2264617461223a7b226d696e223a312c226d6178223a313030307d7d7d78387b226c6576656c3339223a7b2274797065223a2272616e6765222c2264617461223a7b226d696e223a312c226d6178223a313030307d7d7d78387b226c6576656c3430223a7b2274797065223a2272616e6765222c2264617461223a7b226d696e223a312c226d6178223a313030307d7d7d78387b226c6576656c3431223a7b2274797065223a2272616e6765222c2264617461223a7b226d696e223a312c226d6178223a313030307d7d7d78387b226c6576656c3432223a7b22747970554dbe0165223a2272616e6765222c2264617461223a7b226d696e223a312c226d6178223a313030307d7d7d78387b226c6576656c3433223a7b2274797065223a2272616e6765222c2264617461223a7b226d696e223a312c226d6178223a313030307d7d7d78387b226c6576656c3434223a7b2274797065223a2272616e6765222c2264617461223a7b226d696e223a312c226d6178223a313030307d7d7d78387b226c6576656c3435223a7b2274797065223a2272616e6765222c2264617461223a7b226d696e223a312c226d6178223a313030307d7d7d78387b226c6576656c3436223a7b2274797065223a2272616e6765222c2264617461223a7b226d696e223a312c226d6178223a313030307d7d7d78387b226c6576656c3437223a7b2274797065223a2272616e6765222c2264617461223a7b226d696e223a312c226d6178223a313030307d7d7d78387b226c6576656c3438223a7b2274797065223a2272616e6765222c2264617461223a7b226d696e223a312c226d6178223a313030307d7d7d78387b226c6576656c3439223a7b2274797065223a2272616e6765222c2264617461223a7b226d696e223a312c226d6178223a313030307d7d7d5707626974736565646841c0e1f462719cc15cccd0fac248b5d478aed358bfe4835bb02c43c38b9a5f635ad8b890202e8c5bdceee485a7cca0f2c3f3e8b62866b26abe70036bd8bae6713c9d00000000';
    const meta = decodeInscriptionMetadata(txHex, 0);
    expect(meta).toBeDefined();
    expect(meta.op).toBe("deploy")
    expect(meta.tick).toBe('move')
    expect(meta.amount).toBe(1000)
  });

})
